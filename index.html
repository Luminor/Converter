<html>
<head>
<title>Конвертер валют</title>
<link rel="stylesheet" type="text/css" href="style.css">
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
<script>
//http://www.w3schools.com/ajax/ajax_xmlfile.asp
//http://bank-ua.com/export/currrate.xml
function loadXMLDoc(url)
{

var xmlhttp;
var txt,x,xx,i;
if (window.XMLHttpRequest)
  {// code for IE7+, Firefox, Chrome, Opera, Safari
  xmlhttp=new XMLHttpRequest();
  }
else
  {// code for IE6, IE5
  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }
xmlhttp.onreadystatechange=function()
  {
  	
    	alert("xmlhttp.readyState: "+xmlhttp.readyState+"xmlhttp.status: "+xmlhttp.status);
  if (xmlhttp.readyState==4 && xmlhttp.status==200)
    {
    txt="<table border='1'><tr><th>name</th><th>code</th></tr>";
    x=xmlhttp.responseXML.documentElement.getElementsByTagName("item");
    for (i=0;i<x.length;i++)
      {
      txt=txt + "<tr>";
      xx=x[i].getElementsByTagName("name");
      alert(xx);
        {
        	
        try
          {
          txt=txt + "<td>" + xx[0].firstChild.nodeValue + "</td>";
          }
        catch (er)
          {
          txt=txt + "<td> </td>";
          }
        }
      xx=x[i].getElementsByTagName("char3");
        {
        try
          {
          txt=txt + "<td>" + xx[0].firstChild.nodeValue + "</td>";
          }
        catch (er)
          {
          txt=txt + "<td> </td>";
          }
        }
      txt=txt + "</tr>";
      }
    txt=txt + "</table>";
    document.getElementById('txtCDInfo').innerHTML=txt;
    }
  }
xmlhttp.open("GET",url,true);
xmlhttp.send();
}

function ClearAll(){
alert('Все поля очищены!')

$("#selectSum").val('');
$("#result").val('');
$("#currency").val('');

}
function ChangeRatio()
{
	if($('input[name="lcOper"]:checked').val()=='sell')
		alert("sell");
	else alert("buy");
$("#currency").val($('input[name="lcOper"]:checked').val());
}
</script>
</head>
<body>
<div class="converterWrap">
    <div class="calculator">

        <h3>Конвертер валют</h3>


            <form id="calc_form" method="get" onSubmit="">
                <table width="100%">
                    <tr>
                            <td>
                                <label>Введите сумму</label><br/><input id="selectSum" name="selectSum" class="inputText" type="text" value="100" onKeyPress="return numbersonly(this, event)"/>
                            </td>
                            <td align="center" style="vertical-align: bottom;"> </td>
                            <td style="vertical-align: top;"><label>Результат</label><br/><input id="result" class="inputText" type="text" value=""/></td>
                    </tr>
                    <tr>
                            <td><label>Выберите валюту</label><br/>
                                <select id="selectVal" onChange="ChangeCurrency();" name="selectVal">
                                      <option value="UAH" style=" margin-left:5px; padding-left:20px;" selected="selected">UAH - гривна</option>
                                      <option value='USD' style=' margin-left:5px; padding-left:20px;'>USD - доллар США</option>
                                      <option value='EUR' style=' margin-left:5px; padding-left:20px;'>EUR - Евро</option>
					<option value='RUB' style=' margin-left:5px; padding-left:20px;'>RUB - российский рубль</option>
                                </select>
                            </td>
                            <td> </td>
                            <td><label>Конвертировать в</label><br/>
                                <select id="selectValTo" onChange="ChangeCurrency();" name="selectValTo">
                                      <option value="UAH" style=" margin-left:5px;  padding-left:20px;">UAH - гривна</option>
                                      <option value='USD' style=' margin-left:5px; padding-left:20px;' selected="selected">USD - доллар США</option>
                                      <option value='EUR' style=' margin-left:5px;  padding-left:20px;'>EUR - Евро</option>
                                      <option value='RUB' style=' margin-left:5px; padding-left:20px;'>RUB - российский рубль</option>
                                    
                                </select>
                            </td>
                    </tr>
                    <tr>
                            <td> </td>
                            <td> </td>
                            <td>
                                    <div class="radio"> <label><input type="radio" id="lcOper" name="lcOper" value="buy" onClick="ChangeRatio();"/> Покупка</label> </div>
                                    <div class="radio"> <label><input type="radio" id="lcOper" name="lcOper" value="sell" onClick="ChangeRatio();"/> Продажа</label> </div>
                            </td>
                    </tr>
                    <tr>
                            <td> </td>
                            <td> </td>
                            <td>
                                    <input id="currency" name="currency" style="width: 99%;" type="text" readonly="readonly"/>

                            </td>
                    </tr>
            </table>

		<button class="btn"  onclick="loadXMLDoc('http://luminor.github.io/Converter/currate.xml')" >Рассчитать</button>
            <input class="btn" type="button" onclick="ClearAll();" value="Очистить"/> 
            <div id="txtCDInfo"></div>
		</form>
        
    </div>
</div>
</body>
</html>
